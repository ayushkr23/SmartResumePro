<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="app.controller.TemplatePickerController">
   <top>
      <!-- Header Navigation -->
      <VBox styleClass="nav-container">
         <HBox alignment="CENTER_LEFT" spacing="24.0">
            <Label text="🎨 Choose Resume Template" styleClass="label-heading" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="selectedTemplateLabel" text="No template selected" styleClass="label-muted" />
            <Button fx:id="backButton" text="← Back to Wizard" onAction="#handleBack" styleClass="button-secondary" />
         </HBox>
         
         <!-- Progress Indicator -->
         <HBox alignment="CENTER" spacing="16.0" styleClass="progress-indicator">
            <VBox alignment="CENTER" spacing="4.0">
               <Label text="1" styleClass="step-indicator, step-indicator-completed" />
               <Label text="Login" styleClass="label-muted" style="-fx-font-size: 10px;" />
            </VBox>
            <Label text="→" styleClass="label-muted" />
            <VBox alignment="CENTER" spacing="4.0">
               <Label text="2" styleClass="step-indicator, step-indicator-completed" />
               <Label text="Choose Role" styleClass="label-muted" style="-fx-font-size: 10px;" />
            </VBox>
            <Label text="→" styleClass="label-muted" />
            <VBox alignment="CENTER" spacing="4.0">
               <Label text="3" styleClass="step-indicator, step-indicator-completed" />
               <Label text="Build Resume" styleClass="label-muted" style="-fx-font-size: 10px;" />
            </VBox>
            <Label text="→" styleClass="label-muted" />
            <VBox alignment="CENTER" spacing="4.0">
               <Label text="4" styleClass="step-indicator, step-indicator-active" />
               <Label text="Export PDF" styleClass="label-muted" style="-fx-font-size: 10px;" />
            </VBox>
         </HBox>
      </VBox>
   </top>
   
   <center>
      <HBox spacing="24.0" styleClass="container">
         
         <!-- Left Side - Template Selection -->
         <VBox spacing="24.0" prefWidth="600" HBox.hgrow="ALWAYS">
            
            <!-- Header Section -->
            <VBox spacing="16.0" alignment="CENTER">
               <Label text="🎨 Choose Your Template" styleClass="label-title" />
               <Label text="Select a professional template that matches your style and career goals" 
                      styleClass="label-subheading" textAlignment="CENTER" wrapText="true" maxWidth="500" />
            </VBox>
            
            <!-- Template Cards -->
            <ScrollPane fx:id="templateScrollPane" fitToWidth="true" vbarPolicy="AS_NEEDED" hbarPolicy="NEVER" 
                       styleClass="scroll-pane" prefHeight="400">
               <content>
                  <VBox spacing="24.0" alignment="CENTER">
                     <padding>
                        <Insets top="16.0" bottom="16.0" left="16.0" right="16.0" />
                     </padding>
                     
                     <HBox fx:id="templateContainer" spacing="20.0" alignment="CENTER">
                        <!-- Template cards will be populated dynamically -->
                     </HBox>
                  </VBox>
               </content>
            </ScrollPane>
            
            <!-- Export Options -->
            <VBox spacing="16.0" styleClass="card">
               <Label text="📤 Export Options" styleClass="label-subheading" />
               
               <HBox spacing="16.0" alignment="CENTER_LEFT">
                  <VBox spacing="8.0" styleClass="form-group" HBox.hgrow="ALWAYS">
                     <Label text="File Name" styleClass="label" />
                     <TextField fx:id="fileNameField" promptText="Enter filename (without extension)" styleClass="text-field" />
                  </VBox>
                  
                  <VBox spacing="8.0" styleClass="form-group">
                     <Label text="Format" styleClass="label" />
                     <ComboBox fx:id="formatComboBox" prefWidth="120" styleClass="combo-box" />
                  </VBox>
               </HBox>
               
               <HBox spacing="12.0" alignment="CENTER_LEFT">
                  <CheckBox fx:id="includeQRCheckBox" text="Include QR Code" styleClass="check-box" />
                  <Label text="(Links to your LinkedIn or contact info)" styleClass="label-muted" />
               </HBox>
               
               <HBox spacing="16.0" alignment="CENTER">
                  <Button fx:id="saveButton" text="💾 Save Draft" onAction="#handleSave" 
                         styleClass="button-secondary" prefWidth="120" />
                  <Button fx:id="exportButton" text="📄 Export Resume" onAction="#handleExport" 
                         styleClass="button, button-success, button-large" prefWidth="200" />
               </HBox>
               
               <Label fx:id="statusLabel" styleClass="label-muted" textAlignment="CENTER" wrapText="true" />
            </VBox>
            
         </VBox>
         
         <!-- Right Side - Preview -->
         <VBox fx:id="previewContainer" spacing="20.0" prefWidth="400" maxWidth="450" styleClass="card">
            
            <Label text="👁️ Resume Preview" styleClass="label-heading" />
            
            <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" 
                       styleClass="scroll-pane" prefHeight="500">
               <content>
                  <TextArea fx:id="previewArea" editable="false" wrapText="true" 
                           styleClass="text-area" 
                           promptText="Select a template to see your resume preview here..."
                           style="-fx-background-color: #f8fafc; -fx-border-color: transparent;" />
               </content>
            </ScrollPane>
            
            <VBox spacing="12.0" styleClass="form-group">
               <Label text="💡 Preview Tips" styleClass="label-subheading" />
               <VBox spacing="8.0">
                  <Label text="• The actual PDF will have professional formatting and layout" 
                        styleClass="label-muted" wrapText="true" />
                  <Label text="• Colors, fonts, and spacing will be optimized for each template" 
                        styleClass="label-muted" wrapText="true" />
                  <Label text="• QR codes will be properly positioned and functional" 
                        styleClass="label-muted" wrapText="true" />
                  <Label text="• Export to HTML for a detailed preview before PDF" 
                        styleClass="label-muted" wrapText="true" />
               </VBox>
            </VBox>
            
         </VBox>
         
      </HBox>
   </center>
   
   <bottom>
      <!-- Footer -->
      <VBox alignment="CENTER" spacing="8.0" styleClass="nav-container" style="-fx-border-width: 1 0 0 0;">
         <Label text="🎉 You're almost done! Select a template and export your professional resume" 
                styleClass="label-muted" textAlignment="CENTER" />
         <Label text="Your resume will be saved in the 'output' folder and ready to use for job applications" 
                styleClass="label-muted" style="-fx-font-size: 10px;" textAlignment="CENTER" />
      </VBox>
   </bottom>
   
</BorderPane>